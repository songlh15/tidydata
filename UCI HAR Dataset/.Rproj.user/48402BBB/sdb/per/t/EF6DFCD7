{
    "contents" : "#Assignment request\n#1Merges the training and the test sets to create one data set.\n#2Extracts only the measurements on the mean and standard deviation for each measurement. \n#3Uses descriptive activity names to name the activities in the data set\n#4Appropriately labels the data set with descriptive variable names. \n#5Creates a second, independent tidy data set with the average of each variable\n#for each activity and each subject. \n\n#Check and set working directory\n\nif(getwd() != \"C:/Users/songl/Dropbox/Coursera/cleaningdata/project\")\n  setwd(\"C:/Users/songl/Dropbox/Coursera/cleaningdata/project\")\n\n\n#step 1\n\n#read train data\ntrainx <- read.table(\"./UCI HAR Dataset/train/X_train.txt\")\ntrainy <- read.table(\"./UCI HAR Dataset/train/y_train.txt\")\ntrainid <- read.table(\"./UCI HAR Dataset/train/subject_train.txt\")\n\n#combine to make traindata\ntraindata <- cbind(trainx,trainy,trainid)\n\n\n#read test data\n\ntestx <- read.table(\"./UCI HAR Dataset/test/X_test.txt\")\ntesty <- read.table(\"./UCI HAR Dataset/test/y_test.txt\")\ntestid <- read.table(\"./UCI HAR Dataset/test/subject_test.txt\")\n\n\n#combine to make test data\ntestdata <- cbind(testx,testy,testid)\n\n#concatenate two datasets into one\ntraintest <- rbind(traindata,testdata)\n\n#Step 2:  find measurements on the mean and standard deviation\n\n#read features to find corresponding variables\nfeature <- read.table(\"/UCI HAR Dataset/features.txt\")\n\n#find 'mean' or 'std' from those variable lists\nfeatures <- feature[(grep('mean()|std()',feature$V2)),]\n\nvarlist <- as.vector(features$V1)\nvarname <- as.vector(features$V2)\n\n#keep only those variablees we are intrested in and two identifiers\ntraintest <- traintest[,c(varlist,562,563)]\n\n#clean variable name by removing '()' and '-'\n\nvarnameclean <- gsub(\"-|\\\\(|\\\\)\",'',varname)\n\n\nas.vector(varnameclean)\n\nnames(traintest) <- c(varnameclean,\"act\",\"subjectid\") \n\n#Step:3 Uses descriptive activity names to name the activities in the data set\n## read activity labels from activity_labels.txt\n\nactivitylabel <- read.table(\"activity_labels.txt\")\n\ntraintestdata <- merge(traintest,activitylabel,by.x=\"act\",by.y=\"V1\",all=T)\n\n#reoder,rename and clean dataset\ntidy <- traintestdata[,c(81,82,seq(1:80))]\n\ncolnames(tidy)[2] <- \"activity\"\n\n#remove varialbe act and keepp activity \ntidydata <- tidy[,-3]\n\n\n#step: 4\n#create summary tidy dataset by average each varialbe for each subject and each activity\n\ntidysummary <- aggregate(. ~ subjectid + activity, tidydata, mean)\n\n#modify varaible names to make it descriptive and easy to follow\n\nsummarynames1<- gsub('tBody','average_time_body',names(tidysummary))\n\nsummarynames2<- gsub('fBody','average_frequency_body',summarynames1)\nsummarynames3<- gsub('tGravity','average_time_gravity',summarynames2)\nsummarynames4<- gsub('Acc','_accelerometer_',summarynames3)\nsummarynames5<- gsub('Gyro','_gyroscope_',summarynames4)\nsummarynames6<- gsub('Jerk','_jerk_',summarynames5)\nsummarynames7<- gsub('Mag','_magnitude_',summarynames6)\nsummarynames8<- gsub('mean','mean',summarynames7)\nsummarynames9<- gsub('std','std',summarynames8)\nsummarynames10<- gsub('X','_xaxis',summarynames9)\nsummarynames11<- gsub('Y','_yaxis',summarynames10)\nsummarynames12<- gsub('Z','_zaxis',summarynames11)\nsummarynames13<- gsub('meanFreq','mean_freq',summarynames12)\nsummarynames14 <- gsub('bodyBody','body',summarynames13) \nsummarynames <- gsub('__','_',summarynames14) \n\n#add descript names into data\ncolnames(tidysummary) <- summarynames\n\n#output data out to a text file\n \nwrite.table(tidysummary, file = \"summary.txt\", sep = \",\", col.names = colnames(tidysummary))\n\n# read it back in\nsummarytest <- read.table(file = \"summary.txt\",sep = \",\", header = TRUE, stringsAsFactors = F) \n\n#test if two files are the same\nall(tidysummary == summarytest) \n\n\n",
    "created" : 1403118388811.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "301671544",
    "id" : "EF6DFCD7",
    "lastKnownWriteTime" : 1403293528,
    "path" : "C:/Users/songl/Dropbox/Coursera/cleaningdata/UCI HAR Dataset/run_analysis.R",
    "project_path" : "run_analysis.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}